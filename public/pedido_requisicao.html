<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PEDIDO | Mooca Solidária</title>
    <link rel="shortcut icon" href="./assets/imgs/favicon-tfg.png" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fontsa.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap"
        rel="stylesheet">
    
    <script>
        window.BASE_URL = "{{BASE_URL}}";
    </script>

    <link rel="stylesheet" href="./css/all.css">
    <link rel="stylesheet" href="./css/pedido.css">
    <script src="./js/functions.js"></script>
    <script src="./js/pedido.js"></script>
    <script src="./js/login.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

</head>

<body>

    <div class="container-pedido">
        <div class="navbar">
            <div class="navbar-container">
                <img src="./assets/imgs/logo-mooca.png" alt="">
                <p>Boas vindas, <span id="nameUser"></span></p>


                <div id="logoff-user">
                    <img id="img-logoff" src="../assets/imgs/icons8-sair-30 (1).png" >
                    <p onclick="Logout(sessionStorage.getItem ('ID_USER'))">Sair</p>

                </div>

            </div>
        </div>

        <div class="content-pedido">
            <div class="inside-content-pedido">
                <div class="header-pedido">
                    <b>Faça aqui sua solicitação!</b>
                    <p>Preencha o formulário abaixo para abrir sua requisição e enviá-la para análise.</p>
                    <span class="line"></span>
                </div>
                <div class="container-categoria">
                    <span id="label-categoria">Categoria do pedido</span>
                    <select id="categorias-pedido">
                        <option value="">Alimentício(Cesta básica)</option>
                    </select>
                </div>
                <div class="container-mensagem">
                    <div class="msg-label">
                        <span id="label-categoria">Mensagem</span>
                        <textarea id="mensagem-pedido"></textarea>
                    </div>
                    <button id="submit-button" onclick="salvar_requisicao()">Enviar</button>
                </div>
            </div>
        </div>

        <!-- modal case de sucesso de envio do form  -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <div class="modal-body">
                    <img src="./assets/imgs/ok-icon.png" alt="">
                    <p>Seu formulário foi enviado com sucesso. Aguarde nosso retorno para mais informações!</p> 
                    <a href="/pedidos">Acompanhar meus pedidos</a>
                </div>
            </div>
        </div>

         <!-- modal case de erro de envio do form  -->
        <div id="errorModal" class="modal">
            <div class="modal-content error">
                <span class="close">&times;</span>
                <div class="modal-body">
                    <img src="./assets/imgs/error-icon.png" alt="Erro">
                    <p>Ocorreu um erro no envio do formulário. Por favor, tente novamente mais tarde.</p>
                    <a href="#" id="tryAgain">Tentar novamente</a>
                </div>
            </div>
        </div>
        
    </div>


    <!-- Menu de acessibilidade -->
    <div class="acessibility">
        <img src="./assets/imgs/icons8-acessibilidade-40.png" alt="" />
        <div class="options">
            <p>Aumentar Fonte</p>
            <p>Diminuir Fonte</p>
            <p onclick="altoContraste()">Alto-contraste</p>
        </div>
    </div>

    <!-- inserção do VLibras :) -->
    <div vw class="enabled">
        <div vw-access-button class="active"></div>
        <div vw-plugin-wrapper>
            <div class="vw-plugin-top-wrapper"></div>
        </div>
    </div>
</body>

<!-- inserção do VLibras - leitor e tradutor para acessiblidade :) -->
<script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script>
<script>
    new window.VLibras.Widget('https://vlibras.gov.br/app');
</script>

<script>

    listar_tipo()

    var nomeUser = document.getElementById('nameUser');
    nomeUser.innerHTML = sessionStorage.getItem('NOME_USER');

    /* função para abrir/fechar menu de acessibilidade */
    document.querySelector('.acessibility').addEventListener('click', function () {
        var optionsMenu = this.querySelector('.options');
        if (optionsMenu.style.display === 'flex') {
            optionsMenu.style.display = 'none';
        } else {
            optionsMenu.style.display = 'flex';
        }
    });

    /* adicionando a acessibilidade de alto contraste */
    function altoContraste() {
        document.body.classList.toggle('high-contrast');
    };

    // Obter o modal
    var modal = document.getElementById("myModal");

    // Obter o botão de fechar o modal
    var span = document.getElementsByClassName("close")[0];


    // Fechar o modal ao clicar no botão "X"
    span.onclick = function () {
        modal.style.display = "none";
    }

    // Fechar o modal ao clicar fora do conteúdo do modal
    window.onclick = function (event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }

</script>

</html>